(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6203:(e,t,s)=>{Promise.resolve().then(s.bind(s,7589))},7589:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(5155),r=s(2115),n=s(6046),l=s(7139);function c(e){let{className:t=""}=e,[s,n]=(0,r.useState)(!1),c=async()=>{n(!0);try{await (0,l.Wp)()}catch(e){console.error("Ошибка авторизации:",e),alert("Произошла ошибка при авторизации. Попробуйте еще раз.")}finally{n(!1)}};return(0,a.jsx)("button",{onClick:c,disabled:s,className:"\n        btn-telegram \n        flex items-center justify-center \n        gap-3 px-6 py-4 text-lg \n        min-w-[280px] \n        disabled:opacity-50 disabled:cursor-not-allowed\n        transform transition-all duration-200 \n        hover:scale-105 active:scale-95\n        shadow-lg hover:shadow-xl\n        ".concat(t,"\n      "),children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full"}),(0,a.jsx)("span",{children:"Подключение..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",children:(0,a.jsx)("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.820 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})}),(0,a.jsx)("span",{children:"Войти через Telegram"})]})})}function i(){let e=(0,n.useRouter)(),[t,s]=(0,r.useState)(!0),[i,o]=(0,r.useState)(!1);(0,r.useEffect)(()=>{d()},[]);let d=async()=>{try{if((0,l.wR)()){e.push("/dashboard");return}let t=(0,l.mn)();if(t){o(!0);try{await (0,l.KM)(t),e.push("/dashboard")}catch(e){console.error("Ошибка завершения авторизации:",e),alert("Ошибка авторизации. Попробуйте еще раз.")}finally{o(!1)}}}catch(e){console.error("Ошибка проверки авторизации:",e)}finally{s(!1)}};return t||i?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-primary-600 border-t-transparent rounded-full mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:i?"Завершение авторизации...":"Загрузка..."})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-primary-100",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"text-center mb-16 pt-16",children:[(0,a.jsx)("div",{className:"inline-block p-3 bg-primary-100 rounded-2xl mb-6",children:(0,a.jsx)("svg",{className:"w-12 h-12 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,a.jsx)("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-6",children:(0,a.jsx)("span",{className:"text-gradient",children:"KreditScore4"})}),(0,a.jsx)("p",{className:"text-xl md:text-2xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:"Безопасная авторизация через Telegram Bot с отображением персональных данных"}),(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-8 max-w-md mx-auto shadow-xl border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Войти в систему"}),(0,a.jsx)(c,{className:"w-full mb-4"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Нажимая кнопку, вы соглашаетесь с обработкой персональных данных"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16",children:[(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsx)("div",{className:"inline-block p-3 bg-telegram-100 rounded-xl mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-telegram-600",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.820 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Через Telegram"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Быстрая и безопасная авторизация через ваш аккаунт Telegram"})]}),(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsx)("div",{className:"inline-block p-3 bg-green-100 rounded-xl mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Безопасность"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Все данные передаются в зашифрованном виде и надежно защищены"})]}),(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsx)("div",{className:"inline-block p-3 bg-blue-100 rounded-xl mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Аналитика"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Детальная информация о ваших сессиях и устройствах"})]})]}),(0,a.jsxs)("div",{className:"card max-w-4xl mx-auto",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 text-center mb-8",children:"Как это работает"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-primary-600 text-white rounded-full flex items-center justify-center text-xl font-bold mx-auto mb-3",children:"1"}),(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Нажмите кнопку"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Начните авторизацию через Telegram"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-primary-600 text-white rounded-full flex items-center justify-center text-xl font-bold mx-auto mb-3",children:"2"}),(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Откройте бота"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Перейдите в Telegram Bot по ссылке"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-primary-600 text-white rounded-full flex items-center justify-center text-xl font-bold mx-auto mb-3",children:"3"}),(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Поделитесь номером"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Отправьте номер телефона через бота"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-primary-600 text-white rounded-full flex items-center justify-center text-xl font-bold mx-auto mb-3",children:"4"}),(0,a.jsx)("h4",{className:"font-semibold mb-2",children:"Готово!"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Возвращайтесь и пользуйтесь системой"})]})]})]})]})})}},5739:(e,t,s)=>{"use strict";s.d(t,{ZQ:()=>l,i$:()=>c});var a=s(2651),r=s(9208);let n=a.A.create({baseURL:"http://localhost:8000",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=r.A.get("access_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),n.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(r.A.remove("access_token"),window.location.href="/"),Promise.reject(e)});let l={createAuthToken:async()=>(await n.post("/api/auth/create-token")).data,checkAuthStatus:async e=>(await n.post("/api/auth/verify",{auth_token:e})).data,async logout(){await n.post("/api/auth/logout"),r.A.remove("access_token")}},c={getMe:async()=>(await n.get("/api/users/me")).data,getMySessions:async()=>(await n.get("/api/users/me/sessions")).data,getDeviceInfo:async()=>(await n.get("/api/users/me/device-info")).data}},7139:(e,t,s)=>{"use strict";s.d(t,{KM:()=>o,Wp:()=>i,mn:()=>c,ri:()=>l,wR:()=>n});var a=s(9208),r=s(5739);function n(){return!!a.A.get("access_token")}async function l(){try{await r.ZQ.logout()}catch(e){console.error("Ошибка при выходе:",e)}finally{a.A.remove("access_token"),window.location.href="/"}}function c(){let e=new URLSearchParams(window.location.search).get("auth_token");if(e){let t=window.location.pathname;return window.history.replaceState({},"",t),e}return null}async function i(){try{let{telegram_url:e}=await r.ZQ.createAuthToken();window.location.href=e}catch(e){throw console.error("Ошибка при создании токена авторизации:",e),Error("Не удалось начать авторизацию")}}async function o(e){try{var t;let s=await r.ZQ.checkAuthStatus(e);return t=s.access_token,a.A.set("access_token",t,{expires:7,secure:!0,sameSite:"strict"}),s.user}catch(e){throw console.error("Ошибка при завершении авторизации:",e),Error("Не удалось завершить авторизацию")}}}},e=>{var t=t=>e(e.s=t);e.O(0,[403,441,517,358],()=>t(6203)),_N_E=e.O()}]);